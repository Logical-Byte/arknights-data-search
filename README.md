# Arknights Data Search API

ä¸€ä¸ªåŸºäº [FastAPI](https://fastapi.tiangolo.com/) æ„å»ºçš„é«˜æ€§èƒ½æ˜æ—¥æ–¹èˆŸå¹²å‘˜æ•°æ®æŸ¥è¯¢ APIã€‚

æœ¬é¡¹ç›®æ—¨åœ¨æä¾›ä¸€ä¸ªå¿«é€Ÿã€çµæ´»ä¸”æ˜“äºéƒ¨ç½²çš„åç«¯æœåŠ¡ï¼Œç”¨äºæŸ¥è¯¢æ˜æ—¥æ–¹èˆŸå¹²å‘˜çš„è¯¦ç»†æ•°æ®ï¼ŒåŒ…æ‹¬åŸºç¡€ä¿¡æ¯ã€åŠ¨æ€è®¡ç®—çš„é¢æ¿å±æ€§ï¼ˆç™½å€¼ï¼‰ã€æŠ€èƒ½è¯¦æƒ…ä»¥åŠæ¨¡ç»„ä¿¡æ¯ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

*   **ğŸ”„ è‡ªåŠ¨æ•°æ®æ›´æ–°ä¸ç¼“å­˜**ï¼šå¯åŠ¨æ—¶è‡ªåŠ¨æ£€æŸ¥å¹¶ä» [PRTS Wiki](https://torappu.prts.wiki/) ä¸‹è½½æœ€æ–°çš„æ¸¸æˆæ•°æ®ï¼ˆExcel JSONï¼‰ï¼Œå¹¶ç¼“å­˜åœ¨æœ¬åœ° `data_cache` ç›®å½•ä¸­ã€‚æ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œ 24 å°æ—¶è‡ªåŠ¨æ›´æ–°æœºåˆ¶ã€‚
*   **ğŸ” å¼ºå¤§çš„æœç´¢ä¸è¿‡æ»¤**ï¼šæ”¯æŒé€šè¿‡åç§°ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰ã€èŒä¸šã€æ˜Ÿçº§ã€é˜µè¥ã€æ ‡ç­¾ç­‰å¤šç§æ¡ä»¶ç­›é€‰å¹²å‘˜ã€‚
*   **ğŸ§® åŠ¨æ€å±æ€§è®¡ç®—**ï¼šä¸ä»…ä»…æ˜¯é™æ€æ•°æ®ï¼ŒAPI æ”¯æŒæ ¹æ®æŒ‡å®šçš„ **ç²¾è‹±é˜¶æ®µ (Elite)**ã€**ç­‰çº§ (Level)**ã€**ä¿¡èµ– (Trust)** å’Œ **æ½œèƒ½ (Potential)** åŠ¨æ€è®¡ç®—å¹²å‘˜çš„ç”Ÿå‘½å€¼ã€æ”»å‡»åŠ›ã€é˜²å¾¡åŠ›ç­‰é¢æ¿å±æ€§ï¼ˆç™½å€¼ï¼‰ã€‚
*   **ğŸ› ï¸ æŠ€èƒ½è¯¦æƒ…è§£æ**ï¼šå®Œæ•´å±•ç¤ºå¹²å‘˜æŠ€èƒ½çš„å„ç­‰çº§æ•°æ®ï¼Œå¹¶è‡ªåŠ¨è§£æå’Œå¡«å……æè¿°ä¸­çš„åŠ¨æ€æ•°å€¼ï¼ˆå¦‚ `{atk_scale:0%}` -> `120%`ï¼‰ã€‚
*   **ğŸ“¦ æ¨¡ç»„ä¿¡æ¯å±•ç¤º**ï¼šæ”¯æŒæŸ¥è¯¢å¹²å‘˜çš„ä¸“å±æ¨¡ç»„ï¼ˆUniequipï¼‰ï¼Œå±•ç¤ºä¸åŒæ¨¡ç»„ç­‰çº§å¸¦æ¥çš„å±æ€§åŠ æˆåŠç‰¹æ€§/å¤©èµ‹å‡çº§æè¿°ã€‚
*   **ğŸ§© æ¨¡å—åŒ– API ç«¯ç‚¹**ï¼šé™¤äº†èšåˆæŸ¥è¯¢ï¼Œè¿˜æä¾›ç»†ç²’åº¦çš„ç«¯ç‚¹ä»¥ä¾¿æŒ‰éœ€è·å–æ•°æ®ï¼š
    *   `/api/operators/basic`: ä»…åŸºç¡€ä¿¡æ¯ï¼ˆè½»é‡çº§ï¼‰ã€‚
    *   `/api/operators/attributes`: ä»…å±æ€§æ•°æ®ï¼ˆæ”¯æŒè®¡ç®—å‚æ•°ï¼‰ã€‚
    *   `/api/operators/skills`: ä»…æŠ€èƒ½æ•°æ®ã€‚
    *   `/api/operators/modules`: ä»…æ¨¡ç»„æ•°æ®ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å…ˆå†³æ¡ä»¶

*   Python 3.8+

### ä¸€é”®è¿è¡Œ (æ¨è)

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆWindows PowerShellï¼‰è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨é˜¿é‡ŒæºåŠ é€Ÿï¼‰å¹¶å¯åŠ¨æœåŠ¡ï¼š

```powershell
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–ï¼Œç„¶åå¯åŠ¨æœåŠ¡
.\.venv\Scripts\pip.exe install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ && .\.venv\Scripts\uvicorn.exe main:app --host 0.0.0.0 --port 8000
```

### æ‰‹åŠ¨å®‰è£…

1.  **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**:
    ```bash
    python -m venv .venv
    ```

2.  **æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**:
    *   Windows: `.\.venv\Scripts\activate`
    *   Linux/macOS: `source .venv/bin/activate`

3.  **å®‰è£…ä¾èµ–**:
    ```bash
    pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/
    ```

4.  **å¯åŠ¨æœåŠ¡**:
    ```bash
    uvicorn main:app --host 0.0.0.0 --port 8000
    ```

## ğŸ“– API æ–‡æ¡£

æœåŠ¡å¯åŠ¨åï¼Œæ‚¨å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®äº¤äº’å¼æ–‡æ¡£ï¼š

*   **Swagger UI**: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
*   **ReDoc**: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

è¯¦ç»†çš„æ¥å£å®šä¹‰è¯·å‚è€ƒ [API_DOCUMENTATION.md](./API_DOCUMENTATION.md)ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

ä¸ºäº†ä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œé¡¹ç›®é‡‡ç”¨äº†æ¨¡å—åŒ–ç»“æ„ï¼š

*   **`main.py`**: åº”ç”¨ç¨‹åºå…¥å£ï¼Œå®šä¹‰ API è·¯ç”±å’Œ lifespan äº‹ä»¶ã€‚
*   **`models.py`**: å®šä¹‰ Pydantic æ•°æ®æ¨¡å‹ï¼ˆå¦‚ `Operator`, `Skill`, `Module` ç­‰ï¼‰ï¼Œç”¨äºå“åº”çš„åºåˆ—åŒ–å’ŒéªŒè¯ã€‚
*   **`services.py`**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œè´Ÿè´£æ•°æ®åŠ è½½ã€ç¼“å­˜ç®¡ç† (`update_cache_if_needed`) å’Œå±æ€§è®¡ç®— (`calculate_attributes`)ã€‚
*   **`utils.py`**: é€šç”¨å·¥å…·å‡½æ•°ï¼Œå¦‚æ–‡æœ¬æ¸…æ´— (`clean_markup`) å’Œæè¿°å ä½ç¬¦æ›¿æ¢ (`replace_description_placeholders`)ã€‚
*   **`data_cache/`**: å­˜æ”¾ä»è¿œç¨‹ä¸‹è½½çš„æ¸¸æˆæ•°æ® JSON æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)ã€‚
æ•°æ®æ¥æºäº [PRTS Wiki](https://prts.wiki/) å’Œ [ArknightsGameData](https://github.com/Kengxxiao/ArknightsGameData)ã€‚